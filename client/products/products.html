<html ng-app="products_app">
<head>
  <title>Products</title>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script type="text/javascript" src="./products.js"></script>
  <link rel="stylesheet" href="products.css">

</head>

<body ng-controller="productsController">

<a href="/dispCustomers">customers</a> | <a href="/dispOrders">orders</a> | <a href="/dispProducts">products</a> | <a href="/dashboard">dashboard</a>

  <h1>PRODUCTS</h1>
  <input class = "feedback-input" type="text" ng-model="filter_name" placeholder="filter">


<div class="customerTable" id = "cTable" >
  <table>
    <tr>
      <td> Name </td>
      <td> Model </td>
      <td> Quantity </td>
      <td> Tags </td>
      <td> Action </td>
    </tr>

    <tr ng-repeat="product in products | filter: filter_name | orderBy:'-date'">
      <td ng-bind="product.name"></td>
      <td ng-bind="product.model"></td>
      <td ng-bind="product.num_left"></td>
      <td ng-bind="product.tags"></td>
      <td><button class="remove" ng-click="viewProduct(product)" data-toogle="modal" data-target"#productModal">View</button></td>
    </tr>
  </table>
</div>


  <h1>Add a product</h1>


  <input class = "feedback-input" type="text" ng-model="new_product.name" placeholder="name">
  <input class = "feedback-input" type="url" ng-model="new_product.image_url" placeholder="image url">
  <textarea class = "feedback-input" ng-model="new_product.description" placeholder="description"></textarea>
  <input class = "feedback-input" type="text" ng-model="new_product.model" placeholder="model">
  <input class = "feedback-input" type="text" ng-model="new_product.location" placeholder="location">
  <textarea class = "feedback-input" ng-model="new_product.tags" placeholder="tags (comma separated)"></textarea>
  <input class = "feedback-input" type="number" ng-model="new_product.num_left" placeholder="quantity">
  <input type="submit" ng-click="addProduct()">
  <br>

  <!-- Start of modal code -->
  <!-- TODO: Refactor into separate files -->
  <div class="modal fade" id="productModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>

        </button>
          <h1 class="modal-title" id="exampleModalLabel">View Product</h1>

      </div>
      <div class="modal-body" align="left">

        <div class="form-group" >
            <p><b>Name: </b> {{thisOrder.customer_name}}</p>
            <p><b>Image:  </b>{{thisOrder.product}}</p>
            <p><b>Model:  </b>{{thisOrder.quantity}}</p>
            <p><b>Quantity:  </b>{{thisOrder.reason}}</p>
            <p><b>Description:  </b>{{thisOrder.status}}</p>
            <p><b>Location:  </b>{{thisOrder.reason}}</p>
            <p><b>Tags:  </b>{{thisOrder.status}}</p>
        </div>

        <!--
          <h3>Respond:</h3>
        <form>
          <div class="form-group">
                <div class="radio">
                  <label><input type="radio" name="optionResponse" class="approveButton" ng-model="orderResponse.yesOrNo" value = "approve">Approve</label>
                </div>
                <div class="radio">
                  <label><input type="radio" name="optionResponse" class="denyButton" ng-model="orderResponse.yesOrNo" value = "deny">Deny</label>
                </div>
            <label for="message-text" class="form-control-label">Comment:</label>
            <textarea class="form-control" id="message-text" ng-model="orderResponse.comment"></textarea>
          </div>
        </form>
      </div>
    -->
      <div class="modal-footer">
        <button class="btn btn-danger" ng-click='deleteProduct(thisProduct)' >Delete Product</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary" ng-click="requestProduct(thisProduct)">Request</button>
        <button type="button" class="btn btn-primary" ng-click="editProduct(thisProduct)">Edit</button>
      </div>
    </div>
  </div>
</div>


  <script type="text/javascript">
    $('#productModal').on('show.bs.modal', function (event) {
      var button = $(event.relatedTarget);
      var modal = $(this);
    })
  </script>

</body>
</html>
